(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7491],{88872:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/games/pig-latin-game",function(){return n(93101)}])},93101:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return j}});var s=n(85893),a=n(67294),i=n(9008),r=n.n(i),o=(n(27083),n(49677),n(25934)),c=n(9669),l=n.n(c),h=n(77362),u=n(12461),d=n(10073);function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return!e||"object"!==b(e)&&"function"!==typeof e?p(t):e}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function x(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=y(t);if(e){var a=y(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return m(this,n)}}var w=h.Z.Title,C=h.Z.Paragraph,S=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(c,t);var e,n,i,r=x(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),f(p(e=r.call(this,t)),"chatContainer",a.createRef()),f(p(e),"scrollToMyRef",(function(){var t=e.chatContainer.current.scrollHeight-e.chatContainer.current.clientHeight;e.chatContainer.current.scrollTo(0,t)})),e.state={originalValue:"",result:"",msgList:[{position:"left",type:"text",text:'Welcome my friend! Would you like to play Pig Latin game with me? To start the game, please type "start". To learn more about the rules, type "help".',date:new Date}],str:"",msgChan:["init"],minute:"00",second:"00"},e.chanFront=0,e.chanEnd=0,e.status=1,e.gameSeconds=0,e.correctWdCnt=0,e.handleChange=e.handleChange.bind(p(e)),e.appendPlayerMsg=e.appendPlayerMsg.bind(p(e)),e.appendLilyanMsg=e.appendLilyanMsg.bind(p(e)),e.stopGame=e.stopGame.bind(p(e)),e.processPigLatinStatus=e.processPigLatinStatus.bind(p(e)),e}return e=c,(n=[{key:"handleChange",value:function(t){this.setState({msg:t.target.value})}},{key:"appendPlayerMsg",value:function(t){var e=this;if(this.refs.playerInput.clear(),void 0!==this.state.msg){var n=this.state.msg.trim();if(0!==n.length){var s=this.state.msgList,a=this.state.msgChan,i=this.chanEnd;a[0]=n,i=(i+1)%2,s.push({position:"right",type:"text",text:n,date:new Date}),this.chanEnd=i,this.setState({msgList:s,msgChan:a},(function(){return e.scrollToMyRef()})),t.preventDefault()}}}},{key:"componentDidMount",value:function(){var t=this;this.interval=setInterval((function(){return t.processPigLatinStatus()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"processPigLatinStatus",value:function(){this.gameSeconds>0&&this.gameSeconds--;var t="0",e=this.gameSeconds%60;t=e>=10?""+e:"0"+e,this.setState({minute:"0"+Math.floor(this.gameSeconds/60),second:t}),this.chanFront!==this.chanEnd?(this.chanFront=this.chanEnd,1!==this.status?this.gameSeconds<=0?this.stopGame():this.processGame():this.startGame()):0===this.gameSeconds&&2===this.status&&this.stopGame()}},{key:"startGame",value:function(){var t=this.state.msgChan[0].toLowerCase(),e=this.status;"start"===t&&(this.gameSeconds=180,this.status=2,this.correctWdCnt=0);var n=(0,o.Z)();this.updateGameStatusInBackEnd(n,e,t)}},{key:"processGame",value:function(){var t=this.state.msgChan[0].toLowerCase(),e="";"bye"===t?(this.gameSeconds=0,this.status=3,e="The total correct pig latin number is ".concat(this.correctWdCnt," ."),this.appendLilyanMsg(e),this.correctWdCnt=0):"help"!=t&&(this.validatePigLatin(this.state.str,t)?(e="Nice try!",this.appendLilyanMsg(e),this.correctWdCnt++):(e="Oh... the answer is not correct.",this.appendLilyanMsg(e))),this.updateGameStatusInBackEnd(this.state.sessionID,this.status,t)}},{key:"stopGame",value:function(){var t="bye",e=3;if(3!=this.status){this.gameSeconds=0,this.status=3;var n="Game is over. The total correct pig latin number is ".concat(this.correctWdCnt," .");this.appendLilyanMsg(n),this.correctWdCnt=0}else"start"===(t=this.state.msgChan[0].toLowerCase())&&(this.gameSeconds=180,e=1,this.status=2,this.correctWdCnt=0);this.updateGameStatusInBackEnd(this.state.sessionID,e,t)}},{key:"updateGameStatusInBackEnd",value:function(t,e,n){var s=this,a={sessionID:t,requestID:"pig-latin-"+t,userID:"default_user",str:this.state.str,msg:n,status:e};l().post("https://nifty-gasket-338410.wl.r.appspot.com/pig_latin",a,{"Content-Type":"application/json"}).then((function(t){s.appendLilyanMsg(t.data.resMsg),s.setState({sessionID:t.data.sessionID,str:t.data.str})})).catch((function(t){400===t.response.status?u.ZP.error(t.response.data.errMsg):u.ZP.error("sth goes wrong. please give one more try after a while.")}))}},{key:"validatePigLatin",value:function(t,e){var n=t.charAt(0);if("a"==n||"e"==n||"i"==n||"o"==n||"u"==n)return t+"yay"===e;var s=0;for(s=0;s<t.length&&"a"!=(n=t.charAt(s))&&"e"!=n&&"i"!=n&&"o"!=n&&"u"!=n;s++);return t.substring(s,t.length)+t.substring(0,s)+"ay"===e}},{key:"appendLilyanMsg",value:function(t){var e=this,n=this.state.msgList;n.push({position:"left",type:"text",text:t,date:new Date}),this.setState({msgList:n},(function(){return e.scrollToMyRef()}))}},{key:"render",value:function(){var t=this;return(0,s.jsxs)("div",{style:{minHeight:"85vh"},children:[(0,s.jsx)("div",{style:{marginTop:"2%",border:"1px solid rgb(235, 237, 240)"},children:(0,s.jsx)(w,{style:{textAlign:"center",fontSize:"3vh"},children:"Pig Latin Game"})}),(0,s.jsxs)("div",{style:{marginTop:"1%",border:"1px solid rgb(235, 237, 240)"},children:[(0,s.jsx)(C,{style:{textAlign:"left",fontSize:"large"},children:"With 3 minutes, try to type as many correct Pig Latin of given words as possible."}),(0,s.jsx)(C,{style:{textAlign:"left",fontSize:"large"},children:'For words that begin with consonant sounds or consonant clusters, all letters before the initial vowel are placed at the end of the word sequence, and then append "ay". For example, banana\'s Pig Latin is ananabay.'}),(0,s.jsx)(C,{style:{textAlign:"left",fontSize:"large"},children:"For words that begin with vowel sounds, only a syllable 'yay' is appended to the end. For example, egg's Pig Latin is eggyay."})]}),(0,s.jsx)("div",{style:{marginTop:"1%",border:"1px solid rgb(235, 237, 240)",display:2==this.status?"block":"none"},children:(0,s.jsxs)(C,{style:{textAlign:"center",fontSize:"large"},children:[this.state.minute," : ",this.state.second]})}),(0,s.jsx)("div",{ref:this.chatContainer,style:{marginTop:"2%",minHeight:"60vh",maxHeight:"65vh",overflow:"scroll",border:"1px solid rgb(235, 237, 240)"},children:(0,s.jsx)(d.MessageList,{className:"message-list",style:{padding:"0 3%"},lockable:!1,toBottomHeight:"100%",dataSource:this.state.msgList})}),(0,s.jsx)("div",{style:{marginTop:"2%",marginBottom:"1%",border:"1px solid rgb(235, 237, 240)"},children:(0,s.jsx)(d.Input,{placeholder:"Type here...",multiline:!1,ref:"playerInput",maxlength:100,onChange:this.handleChange,onKeyPress:function(e){return!(!e.shiftKey||13!==e.charCode)||(13===e.charCode?(t.appendPlayerMsg(e),!1):void 0)},rightButtons:(0,s.jsx)(d.Button,{text:"Send",onClick:this.appendPlayerMsg})})})]})}}])&&g(e.prototype,n),i&&g(e,i),c}(a.Component);function j(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r(),{children:[(0,s.jsx)("title",{children:"Pig Latin Game"}),(0,s.jsx)("meta",{name:"description",content:"classic pig latin game. answer as many correct pig latin as possible within limited of time."}),(0,s.jsx)("link",{rel:"shortcut icon",href:"/web/favicon.ico"})]}),(0,s.jsx)("div",{children:(0,s.jsx)(S,{})})]})}}},function(t){t.O(0,[6384,7362,9922,6015,9774,2888,179],(function(){return e=88872,t(t.s=e);var e}));var e=t.O();_N_E=e}]);